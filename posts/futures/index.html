<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Stock index futures for normies | Splonk</title>
<meta name="keywords" content="stock index futures, investing, leverage, financial markets, risk management, dollar cost averaging, ETFs">
<meta name="description" content="In this post, I’d like to share my thoughts on stock index futures and why I think they’re worth considering (though this doesn’t mean you should get them), even if you&rsquo;re not exactly a Wall Street Warren.
What are stock index futures?
Stock index futures are financial contracts that obligate the buyer to purchase, or the seller to sell, a stock market index like the S&amp;P 500 at a predetermined price on a specific future date. They allow investors to speculate on or hedge against future changes in an index without owning the underlying stocks.">
<meta name="author" content="">
<link rel="canonical" href="https://splonk.party/posts/futures/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://splonk.party/favicon.svg">
<link rel="icon" type="image/png" sizes="16x16" href="https://splonk.party/favicon.svg">
<link rel="icon" type="image/png" sizes="32x32" href="https://splonk.party/favicon.svg">
<link rel="apple-touch-icon" href="https://splonk.party/apple-touch-icon.png">
<link rel="mask-icon" href="https://splonk.party/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://splonk.party/posts/futures/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://splonk.party/posts/futures/">
  <meta property="og:site_name" content="Splonk">
  <meta property="og:title" content="Stock index futures for normies">
  <meta property="og:description" content="In this post, I’d like to share my thoughts on stock index futures and why I think they’re worth considering (though this doesn’t mean you should get them), even if you’re not exactly a Wall Street Warren.
What are stock index futures? Stock index futures are financial contracts that obligate the buyer to purchase, or the seller to sell, a stock market index like the S&amp;P 500 at a predetermined price on a specific future date. They allow investors to speculate on or hedge against future changes in an index without owning the underlying stocks.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-26T17:46:44+02:00">
    <meta property="article:modified_time" content="2025-05-26T17:46:44+02:00">
    <meta property="article:tag" content="Stock Index Futures">
    <meta property="article:tag" content="Investing">
    <meta property="article:tag" content="Leverage">
    <meta property="article:tag" content="Financial Markets">
    <meta property="article:tag" content="Risk Management">
    <meta property="article:tag" content="Dollar Cost Averaging">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Stock index futures for normies">
<meta name="twitter:description" content="In this post, I’d like to share my thoughts on stock index futures and why I think they’re worth considering (though this doesn’t mean you should get them), even if you&rsquo;re not exactly a Wall Street Warren.
What are stock index futures?
Stock index futures are financial contracts that obligate the buyer to purchase, or the seller to sell, a stock market index like the S&amp;P 500 at a predetermined price on a specific future date. They allow investors to speculate on or hedge against future changes in an index without owning the underlying stocks.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://splonk.party/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Stock index futures for normies",
      "item": "https://splonk.party/posts/futures/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Stock index futures for normies",
  "name": "Stock index futures for normies",
  "description": "In this post, I’d like to share my thoughts on stock index futures and why I think they’re worth considering (though this doesn’t mean you should get them), even if you\u0026rsquo;re not exactly a Wall Street Warren.\nWhat are stock index futures? Stock index futures are financial contracts that obligate the buyer to purchase, or the seller to sell, a stock market index like the S\u0026amp;P 500 at a predetermined price on a specific future date. They allow investors to speculate on or hedge against future changes in an index without owning the underlying stocks.\n",
  "keywords": [
    "stock index futures", "investing", "leverage", "financial markets", "risk management", "dollar cost averaging", "ETFs"
  ],
  "articleBody": "In this post, I’d like to share my thoughts on stock index futures and why I think they’re worth considering (though this doesn’t mean you should get them), even if you’re not exactly a Wall Street Warren.\nWhat are stock index futures? Stock index futures are financial contracts that obligate the buyer to purchase, or the seller to sell, a stock market index like the S\u0026P 500 at a predetermined price on a specific future date. They allow investors to speculate on or hedge against future changes in an index without owning the underlying stocks.\nOne key advantage is the ability to use high leverage without taking out a loan. No loan means no interest payments, which saves money. Leverage lets you control a large investment with a small amount of capital, amplifying both potential gains and losses.\nIsn’t high leverage bad? This is where nuance matters. High leverage does mean higher risk, but it also offers the potential for higher returns. That said, there are ways to manage risk some of which you may already be doing:\nSmall capital: You can’t lose much if you don’t have much to begin with. Starting small limits your exposure. Dollar-cost averaging: Investing a fixed amount regularly say, monthly reduces risk over time. While this may yield lower returns compared to lump-sum investing, it’s often better for risk management and fits well with salaried workers who invest each paycheck. Young investors: If you’re young with a long career ahead, you have time to recover from losses through future income, softening the blow of a bad trade. Eventually, once your metaphorical dragon is satisfied and you’ve hoarded enough capital, your absolute risk increases because you’re investing more. At that point, it makes sense to reduce risk by buying fewer futures contracts and buying other financial instruments.\nIt’s also worth noting that sometimes higher returns can offset the increased risk, which is something to keep in mind.\nWhen to consider reducing leverage As your wealth grows, knowing when to scale back risk becomes important. Here’s a rough framework I use to estimate when to reduce leverage. Adjust it based on your own situation.\nI’d consider reducing leverage when I can sustain myself without working. Reducing leverage doesn’t mean eliminating it, just scaling it down.\nA common rule of thumb is the 4% annual withdrawal rate. For example, if I need $20,000 annually:\n$20,000 ÷ 4% = $500,000\nSo, I’d want at least $500,000 in total investment value before dialing back leverage. With 10x leverage via futures, that would require just $50,000 in actual capital to control $500,000 worth of exposure. As your capital grows past this point, there are various ways to reduce risk.\nHow (and how Not) to derisk Essentially, you’re looking for investments that offer returns but are not highly correlated with your futures exposure. This is tricky because most investments are at least somewhat correlated but that’s fine. You can still work around it by diversifying enough to dilute correlation.\nI’d break derisking strategies into two categories: “I have no alpha” and “I have alpha.”\nAlpha measures an investment’s performance relative to a benchmark. If you consistently outperform the market through skill or strategy, you have alpha. If not, you likely don’t and that’s okay.\nNot like this A derisking method I wouldn’t recommend is simply swapping futures for ETFs. While it reduces leverage, it also diminishes return potential. It’s essentially the same as holding cash (not even bonds just cash). Instead, consider reducing the number of futures contracts and reallocating the freed-up capital into assets that are at least somewhat uncorrelated, like bonds.\nNo alpha Bonds: A straightforward and effective way to reduce correlation and risk. Other index futures: Holding futures from multiple indices can slightly reduce risk, though most indices are still correlated. REITs: Real Estate Investment Trusts offer exposure to income-producing real estate. While they provide diversification, I believe they may underperform going forward so I’m not enthusiastic about recommending them. Alpha If you do have alpha, it’s an excellent derisking tool because alpha is, by definition, uncorrelated. Examples include:\nBuying individual stocks you believe will outperform Investing in country- or sector-specific ETFs Shorting assets you expect to underperform However, having alpha requires high conviction backed by research, domain knowledge, or insider information (ethically acquired, of course).\nHow do stock index futures work in practice? Stock index futures track an index like the S\u0026P 500 and allow you to bet on its future value. To trade them, you’ll need a brokerage account that supports futures and a margin account. You deposit funds (margin) to cover potential losses, enabling leverage that can magnify gains or losses.\nMicro E-mini S\u0026P 500 Futures Contract This contract is designed for smaller investors. Its multiplier is $5 per point. So, if the S\u0026P 500 is at 5,000, the notional value is $25,000 ($5 × 5,000). With 10x leverage, you’d only need $2,500 in margin.\nExample:\nIf the index rises from 5,000 to 5,100, you’d earn $500 (100 points × $5). If it drops to 4,900, you’d lose the same. These contracts typically expire quarterly, so you’ll need to close or roll them over.\nWhy the Micro E-mini? Regular S\u0026P 500 futures are large. Here’s how they compare:\nContract Type Multiplier Notional Value S\u0026P 500 = 5,000 Margin\n10x Leverage Relative Size Standard S\u0026P 500 $250/point $1,250,000 $125,000 Standard E-mini S\u0026P 500 $50/point $250,000 $25,000 1/5 of Standard Micro E-mini S\u0026P 500 $5/point $25,000 $2,500 1/10 of E-mini The Micro E-mini is far more accessible for retail investors, allowing greater flexibility and risk control.\nTax Considerations In the U.S., futures are taxed under the 60/40 rule: 60% of gains are treated as long-term capital gains, and 40% as short-term, no matter how long you hold the contract. This can be more favorable than other investments, but rules vary by country so check yours.\nFurther Reading In the next post, I’ll explain why I chose the Russell 2000 index.\nFeedback Have suggestions or critiques? Feel free to email me:\nsplonk@splonk.party\nThank you for your attention to this matter!\n",
  "wordCount" : "1012",
  "inLanguage": "en",
  "datePublished": "2025-05-26T17:46:44+02:00",
  "dateModified": "2025-05-26T17:46:44+02:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://splonk.party/posts/futures/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Splonk",
    "logo": {
      "@type": "ImageObject",
      "url": "https://splonk.party/favicon.svg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://splonk.party/" accesskey="h" title="Splonk (Alt + H)">Splonk</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Stock index futures for normies
    </h1>
    <div class="post-meta"><span title='2025-05-26 17:46:44 +0200 CEST'>May 26, 2025</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;1012 words

</div>
  </header> 
  <div class="post-content"><p>In this post, I’d like to share my thoughts on stock index futures and why I think they’re worth considering (though this doesn’t mean you <em>should</em> get them), even if you&rsquo;re not exactly a Wall Street Warren.</p>
<h3 id="what-are-stock-index-futures">What are stock index futures?<a hidden class="anchor" aria-hidden="true" href="#what-are-stock-index-futures">#</a></h3>
<p>Stock index futures are financial contracts that obligate the buyer to purchase, or the seller to sell, a stock market index like the S&amp;P 500 at a predetermined price on a specific future date. They allow investors to speculate on or hedge against future changes in an index without owning the underlying stocks.</p>
<p>One key advantage is the ability to use high leverage without taking out a loan. No loan means no interest payments, which saves money. Leverage lets you control a large investment with a small amount of capital, amplifying both potential gains and losses.</p>
<h3 id="isnt-high-leverage-bad">Isn’t high leverage bad?<a hidden class="anchor" aria-hidden="true" href="#isnt-high-leverage-bad">#</a></h3>
<p>This is where nuance matters. High leverage <em>does</em> mean higher risk, but it also offers the potential for higher returns. That said, there are ways to manage risk some of which you may already be doing:</p>
<ol>
<li><strong>Small capital</strong>: You can’t lose much if you don’t have much to begin with. Starting small limits your exposure.</li>
<li><strong>Dollar-cost averaging</strong>: Investing a fixed amount regularly say, monthly reduces risk over time. While this may yield lower returns compared to lump-sum investing, it’s often better for risk management and fits well with salaried workers who invest each paycheck.</li>
<li><strong>Young investors</strong>: If you’re young with a long career ahead, you have time to recover from losses through future income, softening the blow of a bad trade.</li>
</ol>
<p>Eventually, once your metaphorical dragon is satisfied and you’ve hoarded enough capital, your absolute risk increases because you&rsquo;re investing more. At that point, it makes sense to reduce risk by buying fewer futures contracts and buying other financial instruments.</p>
<p>It’s also worth noting that sometimes higher returns can offset the increased risk, which is something to keep in mind.</p>
<h3 id="when-to-consider-reducing-leverage">When to consider reducing leverage<a hidden class="anchor" aria-hidden="true" href="#when-to-consider-reducing-leverage">#</a></h3>
<p>As your wealth grows, knowing when to scale back risk becomes important. Here’s a rough framework I use to estimate when to reduce leverage. Adjust it based on your own situation.</p>
<p>I’d consider reducing leverage when I can sustain myself without working. Reducing leverage doesn’t mean eliminating it, just scaling it down.</p>
<p>A common rule of thumb is the 4% annual withdrawal rate. For example, if I need $20,000 annually:</p>
<p><strong>$20,000 ÷ 4% = $500,000</strong></p>
<p>So, I’d want at least $500,000 in total investment value before dialing back leverage. With 10x leverage via futures, that would require just $50,000 in actual capital to control $500,000 worth of exposure. As your capital grows past this point, there are various ways to reduce risk.</p>
<h3 id="how-and-how-not-to-derisk">How (and how <em>Not</em>) to derisk<a hidden class="anchor" aria-hidden="true" href="#how-and-how-not-to-derisk">#</a></h3>
<p>Essentially, you&rsquo;re looking for investments that offer returns but are <em>not</em> highly correlated with your futures exposure. This is tricky because most investments are at least somewhat correlated but that’s fine. You can still work around it by diversifying enough to dilute correlation.</p>
<p>I’d break derisking strategies into two categories: <strong>“I have no alpha”</strong> and <strong>“I have alpha.”</strong></p>
<blockquote>
<p><em>Alpha</em> measures an investment’s performance relative to a benchmark. If you consistently outperform the market through skill or strategy, you have alpha. If not, you likely don’t and that’s okay.</p></blockquote>
<h3 id="not-like-this">Not like this<a hidden class="anchor" aria-hidden="true" href="#not-like-this">#</a></h3>
<p>A derisking method I <em>wouldn’t</em> recommend is simply swapping futures for ETFs. While it reduces leverage, it also diminishes return potential. It&rsquo;s essentially the same as holding cash (not even bonds just cash). Instead, consider reducing the number of futures contracts and reallocating the freed-up capital into assets that are <em>at least somewhat</em> uncorrelated, like bonds.</p>
<h3 id="no-alpha">No alpha<a hidden class="anchor" aria-hidden="true" href="#no-alpha">#</a></h3>
<ol>
<li><strong>Bonds</strong>: A straightforward and effective way to reduce correlation and risk.</li>
<li><strong>Other index futures</strong>: Holding futures from multiple indices can slightly reduce risk, though most indices are still correlated.</li>
<li><strong>REITs</strong>: Real Estate Investment Trusts offer exposure to income-producing real estate. While they provide diversification, I believe they may underperform going forward so I’m not enthusiastic about recommending them.</li>
</ol>
<h3 id="alpha">Alpha<a hidden class="anchor" aria-hidden="true" href="#alpha">#</a></h3>
<p>If you <em>do</em> have alpha, it&rsquo;s an excellent derisking tool because alpha is, by definition, uncorrelated. Examples include:</p>
<ul>
<li>Buying individual stocks you believe will outperform</li>
<li>Investing in country- or sector-specific ETFs</li>
<li>Shorting assets you expect to underperform</li>
</ul>
<p>However, having alpha requires high conviction backed by research, domain knowledge, or insider information (ethically acquired, of course).</p>
<h4 id="how-do-stock-index-futures-work-in-practice">How do stock index futures work in practice?<a hidden class="anchor" aria-hidden="true" href="#how-do-stock-index-futures-work-in-practice">#</a></h4>
<p>Stock index futures track an index like the S&amp;P 500 and allow you to bet on its future value. To trade them, you’ll need a brokerage account that supports futures and a margin account. You deposit funds (margin) to cover potential losses, enabling leverage that can magnify gains or losses.</p>
<h3 id="micro-e-mini-sp-500-futures-contract">Micro E-mini S&amp;P 500 Futures Contract<a hidden class="anchor" aria-hidden="true" href="#micro-e-mini-sp-500-futures-contract">#</a></h3>
<p>This contract is designed for smaller investors. Its multiplier is $5 per point. So, if the S&amp;P 500 is at 5,000, the notional value is $25,000 ($5 × 5,000). With 10x leverage, you&rsquo;d only need $2,500 in margin.</p>
<p>Example:<br>
If the index rises from 5,000 to 5,100, you’d earn $500 (100 points × $5). If it drops to 4,900, you’d lose the same. These contracts typically expire quarterly, so you’ll need to close or roll them over.</p>
<h3 id="why-the-micro-e-mini">Why the Micro E-mini?<a hidden class="anchor" aria-hidden="true" href="#why-the-micro-e-mini">#</a></h3>
<p>Regular S&amp;P 500 futures are large. Here’s how they compare:</p>
<table>
  <thead>
      <tr>
          <th><strong>Contract Type</strong></th>
          <th><strong>Multiplier</strong></th>
          <th><strong>Notional Value <br>S&amp;P 500 = 5,000</strong></th>
          <th><strong>Margin<br>10x Leverage</strong></th>
          <th><strong>Relative Size</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Standard S&amp;P 500</td>
          <td>$250/point</td>
          <td>$1,250,000</td>
          <td>$125,000</td>
          <td>Standard</td>
      </tr>
      <tr>
          <td>E-mini S&amp;P 500</td>
          <td>$50/point</td>
          <td>$250,000</td>
          <td>$25,000</td>
          <td>1/5 of Standard</td>
      </tr>
      <tr>
          <td>Micro E-mini S&amp;P 500</td>
          <td>$5/point</td>
          <td>$25,000</td>
          <td>$2,500</td>
          <td>1/10 of E-mini</td>
      </tr>
  </tbody>
</table>
<p>The Micro E-mini is far more accessible for retail investors, allowing greater flexibility and risk control.</p>
<h3 id="tax-considerations">Tax Considerations<a hidden class="anchor" aria-hidden="true" href="#tax-considerations">#</a></h3>
<p>In the U.S., futures are taxed under the 60/40 rule: 60% of gains are treated as long-term capital gains, and 40% as short-term, no matter how long you hold the contract. This can be more favorable than other investments, but rules vary by country so check yours.</p>
<h3 id="further-reading">Further Reading<a hidden class="anchor" aria-hidden="true" href="#further-reading">#</a></h3>
<p>In the next post, I’ll explain why I chose the Russell 2000 index.</p>
<h3 id="feedback">Feedback<a hidden class="anchor" aria-hidden="true" href="#feedback">#</a></h3>
<p>Have suggestions or critiques? Feel free to email me:<br>
<strong><a href="mailto:splonk@splonk.party">splonk@splonk.party</a></strong></p>
<p>Thank you for your attention to this matter!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://splonk.party/tags/stock-index-futures/">Stock Index Futures</a></li>
      <li><a href="https://splonk.party/tags/investing/">Investing</a></li>
      <li><a href="https://splonk.party/tags/leverage/">Leverage</a></li>
      <li><a href="https://splonk.party/tags/financial-markets/">Financial Markets</a></li>
      <li><a href="https://splonk.party/tags/risk-management/">Risk Management</a></li>
      <li><a href="https://splonk.party/tags/dollar-cost-averaging/">Dollar Cost Averaging</a></li>
      <li><a href="https://splonk.party/tags/etfs/">ETFs</a></li>
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://splonk.party/">Splonk</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
